<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Pablo Gómez Barreiro</title>
<link>https://pgomba.github.io/pgb_website/post.html</link>
<atom:link href="https://pgomba.github.io/pgb_website/post.xml" rel="self" type="application/rss+xml"/>
<description></description>
<generator>quarto-1.3.353</generator>
<lastBuildDate>Sun, 01 Sep 2024 23:00:00 GMT</lastBuildDate>
<item>
  <title>The golden era of Ten simple rules articles</title>
  <dc:creator>Pablo Gómez Barreiro</dc:creator>
  <link>https://pgomba.github.io/pgb_website/posts/02_09_24/index.html</link>
  <description><![CDATA[ 



<p>Top 10 lists have dominated the internet for ages, and academic publishing is no exception. My Twitter feed is proof of this; with frequent “Ten Simple Rules to…” being retweeted left and right. This made me curious about the origin of these papers and whether they were a sudden trend or just a passing phase. I did not jump into this data search with many expectations, but what I initially thought would be a simple answer turned into an unexpectedly enjoyable internet adventure.</p>
<section id="the-data-and-the-cleaning" class="level3">
<h3 class="anchored" data-anchor-id="the-data-and-the-cleaning">The data, and the cleaning</h3>
<p>Using <a href="https://www.dimensions.ai/">Dimensions</a>, I downloaded all available data for articles containing the phrases “10 simple rules” and “Ten simple rules.” It’s not a perfect starting point, but I’ll clean the data later. If you’d like to follow along or explore on your own, you can find the original .csv file here: <a href="https://github.com/pgomba/pgb_website/blob/main/posts/28_08_24/Dimensions-Publication-2024-08-24_19-59-19.csv">LINK</a>. Just remember to skip the first row when loading the file in R. After that, it’s simply a matter of filtering out titles that don’t contain the target keywords</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb1-2"></span>
<span id="cb1-3">keywords<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ten simple rules"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"10 simple rules"</span>)</span>
<span id="cb1-4"></span>
<span id="cb1-5">clean_data<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_csv</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Dimensions-Publication-2024-08-24_19-59-19.csv"</span>,  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">skip =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb1-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">grepl</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(keywords,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">collapse =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"|"</span>),<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tolower</span>(Title)))</span>
<span id="cb1-7"></span>
<span id="cb1-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(clean_data,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span></code></pre></div>
</details>
</div>
</section>
<section id="the-original-sin" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="the-original-sin">The original sin</h3>
<p>Arranging data by publication year shows that the first known paper (according to Dimensions) with “Ten simple rules” in its title was published back in 1988.</p>

<div class="no-row-height column-margin column-container"><div class="">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pgomba.github.io/pgb_website/posts/02_09_24/wfrr.jpg" class="img-fluid figure-img" alt="Screenshot from the 1988 movie Who framed roger rabbit?"></p>
<figcaption class="figure-caption">For temporal context, the movie <em>Who framed roger rabbit?</em> was also published in 1988</figcaption>
</figure>
</div>
</div></div><div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb2-2"></span>
<span id="cb2-3">clean_data<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb2-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(Title,PubYear)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb2-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(PubYear)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb2-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span></code></pre></div>
</details>
</div>
<p>The paper, titled <a href="https://www.tandfonline.com/doi/abs/10.1300/J043v03n01_06"><em>Ten Simple Rules for Improving Advertising Programs in the Health Care Industry</em></a><em>,</em> was the first of its kind. I’d love to provide more details about these rules, but in 1988, academia hadn’t yet discovered the wonders of open access, and modern publishers still believe in gatekeeping the contents of a 36-year-old article.</p>
<p>The second paper with a similar title had to wait a whopping 17 years before making its appearance in 2005. Philip E. Bourne, the Editor-in-Chief of <em>PLOS Computational Biology</em>, was the mastermind behind the fitting title <em>Ten Simple Rules for Getting Published</em>, which can be credited with truly starting the “10 simple rules” trend, setting off a snowball effect in academic publishing.</p>
</section>
<section id="the-golden-era" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="the-golden-era">The golden era</h3>
<p>“<em>Ten simple rules</em>” is such a simple and effective formula for a title—a blend of clickbait with the enticing promise to solve the reader’s problems in just a few easy steps. But just how many of these papers are out there in the wild? and the answer is:</p>

<div class="no-row-height column-margin column-container"><div class="">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://link.springer.com/chapter/10.1007/978-3-031-48044-7_32"><img src="https://pgomba.github.io/pgb_website/posts/02_09_24/clickbait.PNG" class="img-fluid figure-img" alt="Screen caption of the paper titled The association between academia clickbait and impact"></a></p>
<figcaption class="figure-caption">Clickbait titles in academia are on the rise, but this is not necessarily correlated with an increase of citations</figcaption>
</figure>
</div>
</div></div><div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggthemes)</span>
<span id="cb3-2"></span>
<span id="cb3-3">clean_data<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.by=</span>PubYear,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>())<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x=</span>PubYear,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y=</span>n))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_col</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"darkred"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1988</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2024</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"The age of 10 simple rules...."</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Number of Articles"</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Year"</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Data source: Dimensions"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_economist</span>()<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hjust =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>),</span>
<span id="cb3-11">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.title.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">vjust =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>),</span>
<span id="cb3-12">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">angle=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">90</span>))</span></code></pre></div>
</details>
</div>
<p><img src="https://pgomba.github.io/pgb_website/posts/02_09_24/plot1.png" class="img-fluid" alt="A histogram showing the number of articles with ten simple rules in its title over time."></p>
<p>a lot! About 300 of “10 simple rules” papers. That means in the scientific literature there are at least 3000 simple rules!</p>
<p>My next question was, “Where are all these articles being published?” When I saw the answer, my first thought was that I must have made an embarrassing mistake during data cleaning or miswritten something in the code. But nope, the data was correct—papers titled <em>Ten Simple Rules</em> have a clear and distinct origin.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">clean_data<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb4-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.by=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">`</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Source title</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">`</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>())<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb4-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(n))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb4-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">`</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Source title</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">`</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">grepl</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"International Journal for Paras"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">`</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Source title</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">`</span>),<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"IJPPW"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">`</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Source title</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">`</span>))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb4-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb4-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fct_reorder</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">`</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Source title</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">`</span>,n),<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x=</span>n))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_col</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"darkred"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">limits =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span>))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"The age of 10 simple rules...."</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Top 10 journals"</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Number of articles"</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Data source: Dimensions"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_economist</span>()<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hjust =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>),</span>
<span id="cb4-12">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.title.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">vjust =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>))</span></code></pre></div>
</details>
</div>
<p><img src="https://pgomba.github.io/pgb_website/posts/02_09_24/plot2.png" class="img-fluid" alt="A graph showing the journal PLOS Computational Biology has published the large majority of articles with the words &quot;ten simple rules&quot; in its title"></p>
<p>The large majority of these papers are coming from <em>PLOS Computational Biology</em>, and of course it’s no coincidence that their Editor-in-Chief published the first modern <em>Ten Simple Rules</em> paper back in 2005. This became a series, with him leading the list of authors who had articles published in it.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Compile a vector with all authors names and count</span></span>
<span id="cb5-2">all_authors <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">trimws</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unlist</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">strsplit</span>(clean_data<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Authors, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">";"</span>)))</span>
<span id="cb5-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">table</span>(all_authors)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb5-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.tibble</span>()<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb5-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(n))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb5-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  all_authors              n
  &lt;chr&gt;                &lt;int&gt;
1 Bourne, Philip E.       27
2 Bourne, Philip E        12
3 Botham, Crystal M.       6
4 Mulder, Nicola           5
5 De Las Rivas, Javier     4</code></pre>
</div>
</div>
</section>
<section id="the-impact-of-10-simple-rules-for" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="the-impact-of-10-simple-rules-for">The impact of 10 simple rules for</h3>
<p>Dimensions data also includes article citation numbers. To assess the impact of these papers over time, I decided to track the number of citations they accumulate each year, adding 1 to avoid dividing by zero for articles published in 2024.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggrepel)</span>
<span id="cb7-2">clean_data<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb7-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">years_publicated=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2024</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>PubYear<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,</span>
<span id="cb7-4">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cit_per_year=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">`</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Times cited</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">`</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>years_publicated,</span>
<span id="cb7-5">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">iscompbio=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">`</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Source title</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">`</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"PLOS Computational Biology"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Yes"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"No"</span>))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb7-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x=</span>PubYear,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y=</span>cit_per_year,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill=</span>iscompbio))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"darkblue"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"darkred"</span>))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_jitter</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">height=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">width =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">shape=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">21</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_text_repel</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data=</span>.<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb7-10">                    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(cit_per_year<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">40</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb7-11">                    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Title=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gsub</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ten simple rules for "</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"..."</span>,<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tolower</span>(Title))),</span>
<span id="cb7-12">                  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label=</span>Title,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y=</span>cit_per_year),</span>
<span id="cb7-13">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nudge_y=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>,</span>
<span id="cb7-14">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">force=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>,</span>
<span id="cb7-15">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">max.overlaps=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>,</span>
<span id="cb7-16">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">direction=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"both"</span>,</span>
<span id="cb7-17">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>,</span>
<span id="cb7-18">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">segment.linetype =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span></span>
<span id="cb7-19">                  )<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-20">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1988</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2024</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-21">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"The impact of 10 simple rules for...."</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Citations/year published"</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Year"</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Data source: Dimensions"</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Published in PLOS CB?"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-22">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_economist</span>()<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-23">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hjust =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>),</span>
<span id="cb7-24">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.title.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">vjust =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>),</span>
<span id="cb7-25">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">angle=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">90</span>),</span>
<span id="cb7-26">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bottom"</span>)</span></code></pre></div>
</details>
</div>
<p><img src="https://pgomba.github.io/pgb_website/posts/02_09_24/plot3.png" class="img-fluid" alt="A graph with the number of citations accumulated per year against year published of papers with 10 simple rules in its title. The graph makes a distinction between articles published or not at PLOS"></p>

<div class="no-row-height column-margin column-container"><div class="">
<p><a href="https://www.sciencedirect.com/science/article/pii/S0149763417303111">Ten simple rules for neuroimaging meta-analysis</a> | Elsevier</p>
<p><br></p>
<p><a href="https://elifesciences.org/articles/49547">Ten simple rules for the computational modeling of behavioral data</a> | eLife</p>
<p><br></p>
<p><a href="https://mentalhealth.bmj.com/content/21/3/95">Ten simple rules for conducting umbrella reviews</a> | BMJ</p>
<p><br></p>
<p><a href="https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1003285">Ten Simple Rules for Reproducible Computational Research</a> | PLOS</p>
<p><br></p>
<p><a href="https://www.sciencedirect.com/science/article/pii/S1053811909011999">Ten simple rules for dynamic causal modeling</a> | Elsevier</p>
</div></div><p>For good measurement I am also going to plot articles vs total citations</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">clean_data<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb8-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">`</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Times cited</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">`</span>))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_histogram</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"darkred"</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">binwidth =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"The impact of 10 simple rules for...."</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Number of articles"</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Total citations"</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Data source: Dimensions"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_economist</span>()<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hjust =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>),</span>
<span id="cb8-7">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.title.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">vjust =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>),</span>
<span id="cb8-8">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">angle=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">90</span>))</span></code></pre></div>
</details>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pgomba.github.io/pgb_website/posts/02_09_24/plot4.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Histogram showing most articles with ten simple rules in the title are in the low spectrum of number of citations</figcaption>
</figure>
</div>
<p>Despite PLOS having the large majority of <em>ten simple rules</em> articles, the more impactful ones (citation wise) were published at different publishers. However, in general the majority of articles remain on the lower end of the citation spectrum, including some newer articles that may not have yet achieved their breakthrough.</p>
<p>At this point, I decided to turn to the internet for some additional clues into PLOS and its “Ten Simple Rules” series, just to discover my findings were not particularly novel.</p>
<p><a href="https://x.com/StephenBHeard">Stephen Heard</a> had already commented on this trend on his <a href="https://scientistseessquirrel.wordpress.com/2023/10/31/10-simple-rules-for-writing-10-simple-rules-papers/">blog</a> less than a year ago. Along with a quality parody of this trending genre of papers, his blog ends up highlighting the epitome article of the <em>Ten simple rules</em>… series: <a href="https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1003858">Ten Simple Rules for Writing a PLOS Ten Simple Rules Article</a>. Published back in 2014, the article is still a fun read with some interesting data on the series. Back then, Philip E. Bourne was present in almost half of the papers on the series.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pgomba.github.io/pgb_website/posts/02_09_24/pcbi.1003858.g002.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">2014 Pie chart from PLOS article shows Philip E. Bourne presence in the series</figcaption>
</figure>
</div>
</section>
<section id="the-future-of-the-ten-simple-rules-series" class="level3">
<h3 class="anchored" data-anchor-id="the-future-of-the-ten-simple-rules-series">The future of the <em>ten simple rules</em> series</h3>
<p>Later, in 2018, Philip E. Bourne would then went into publishing <a href="https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1006670">One thousand simple rules</a>. The paper ends rising some interesting questions about the series, its novelty and the future of science dissemination. This article goes as far as questioning of whether these articles might be better suited as blogs. But here we are in 2024, and the series is still going strong. With the current PLOS article processing chargess, each published rule cost authors approximately $296, perhaps an extra factor to reconsider the long term viability of the series in its current format. At glance, some articles in the series seem to offer basic guidelines and common sense, with a wide range of tones in them (From <a href="https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1004084">Ten simple rules to win a Nobel prize</a> to <a href="https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1009957">Ten simple rules to ruin a collaborative environment</a>). In 2023, the number of articles published in the series was halved compared to 2022, although the 2024 “harvest” is on track to match 2023’s output.<br>
As 2025 marks the 20th anniversary of the “Ten Simple Rules” series, will PLOS plan a special edition to celebrate the milestone?</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>PLOS articles can be downloaded for text mining purposes from <a href="https://plos.org/text-and-data-mining/">here</a>. In hindsight, I should have use this to get some better metrics for the <em>Ten simple rules…</em> series. I have got a tutorial on text mining PLOS data <a href="https://pgomba.github.io/pgb_website/posts/08_10_23/">here</a> in case you want to explore further.</p>
</div>
</div>


</section>

 ]]></description>
  <category>R</category>
  <category>PLOS</category>
  <category>Data analysis</category>
  <guid>https://pgomba.github.io/pgb_website/posts/02_09_24/index.html</guid>
  <pubDate>Sun, 01 Sep 2024 23:00:00 GMT</pubDate>
  <media:content url="https://pgomba.github.io/pgb_website/posts/02_09_24/thumbn.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Web-scraping a journal (Biology Open) using R</title>
  <dc:creator>Pablo Gómez Barreiro</dc:creator>
  <link>https://pgomba.github.io/pgb_website/posts/18_10_23/index.html</link>
  <description><![CDATA[ 



<p>This is the third installment of a series of blog/tutorials exploring some of the text-mining/web-scraping methods used on the preprint (<a href="https://arxiv.org/abs/2309.15884">The Strain on Scientific Publishing</a>). Head over to <a href="https://pagomba-blog.netlify.app/posts/08_10_23/">Text-mining PLOS articles using R</a> to read the first instance, and here to catch up with the second one: <a href="https://pagomba-blog.netlify.app/posts/11_10_23/">Text-mining a Taylor &amp; Francis journal using R</a>.</p>
<p>This time is all about using web-scraping to obtain editorial information from scientific journals. <a href="https://journals.biologists.com/bio">Biology Open</a>, an Open Access journal from <a href="https://journals.biologists.com">The Company of Biologists</a>, have kindly offered themselves for the test. To the task at hand!</p>
<section id="step-1-finding-the-nodes-of-interest" class="level3">
<h3 class="anchored" data-anchor-id="step-1-finding-the-nodes-of-interest">Step 1: Finding the nodes of interest</h3>
<p>Before jumping into “large scale” web-scraping, is best to optimize for one target and optimize from there. For this test I´v chosen the article <a href="https://journals.biologists.com/bio/article/6/2/278/1846/Identification-of-SSR-markers-closely-linked-to?searchresult=1#9229331">Identification of SSR markers closely linked to the yellow seed coat color gene in heading Chinese cabbage (<em>Brassica rapa</em> L. ssp. <em>pekinensis</em>)</a>. To show the editorial data of this paper we need to click on the website button <code>Article history</code>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pgomba.github.io/pgb_website/posts/18_10_23/editorial.PNG" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Editorial info shows after click on Article history button - screenshot</figcaption>
</figure>
</div>
<p>Right clicking in the editorial data pop-up will show a menu with several options depending on your browser. If you are using Firefox, select the button <code>Insepct (Q)</code></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pgomba.github.io/pgb_website/posts/18_10_23/firefox.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Right click in editorial time to show browser menu - screenshot</figcaption>
</figure>
</div>
<p>Once you click <code>Inspect (Q)</code> (or the equivalent on your browser) the screen will split in two and will show the <code>html</code> code linked to the editorial times.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pgomba.github.io/pgb_website/posts/18_10_23/html_code.PNG" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Article html code - screenshot</figcaption>
</figure>
</div>
<p>Our target nodes are going to be <code>wi-state</code> and <code>wi-date</code>. For extra points we are going to target Keywords too, but I´ll let you figure out with nodes we need to target for that (click below to get the answer)</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click here to find Keyword nodes
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><code>.content-metadata-keywords a</code></p>
</div>
</div>
</div>
</section>
<section id="step-2-the-code" class="level3">
<h3 class="anchored" data-anchor-id="step-2-the-code">Step 2: The code</h3>
<p>Once again we to load the R libraries we plan to use for this project:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse) </span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(rvest)</span></code></pre></div>
</div>
<p>It is time now to download the article <code>.html</code> document and extract the nodes. To avoid reading/downloading again and again the same article it is best to store it as an object (<code>article</code>) once and work with it. This way you are “calling” only once to the host server, reducing your footprint and being less invasive.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">article<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_html</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://journals.biologists.com/bio/article/6/2/278/1846/Identification-of-SSR-markers-closely-linked-to"</span>)</span>
<span id="cb2-2"></span>
<span id="cb2-3">editorial_state<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>article<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb2-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_nodes</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".wi-state"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb2-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>()</span>
<span id="cb2-6"></span>
<span id="cb2-7">editorial_date<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>article<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb2-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_nodes</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".wi-date"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb2-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>()</span>
<span id="cb2-10"></span>
<span id="cb2-11">keywords<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>article<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb2-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_nodes</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".content-metadata-keywords a"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb2-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>()</span>
<span id="cb2-14"></span>
<span id="cb2-15">editorial_state</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Received:" "Accepted:"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">editorial_date</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "01 Sep 2016" "03 Jan 2017"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">keywords</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Brassica rapa"   "Seed coat color" "SSR markers"     "Genetic map"    </code></pre>
</div>
</div>
<p>I personally like to store the data in a data frame, with a single column containing the editorial data. On a large scale project sometimes some unexpected data (e.g.&nbsp;revision dates) is shipped with these nodes, and having everything on a single string adds flexibility later to extract data into new columns using the functions <code>mutate()</code> and <code>gsub()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">editorial_times<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(editorial_state,editorial_date,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">collapse =</span>  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" - "</span>)</span>
<span id="cb8-2">keywords <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(keywords,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">collapse =</span>  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">", "</span>)</span>
<span id="cb8-3"></span>
<span id="cb8-4"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## Storing data in a data frame</span></span>
<span id="cb8-5"></span>
<span id="cb8-6">article_df<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(editorial_times,keywords)</span>
<span id="cb8-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(article_df)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                editorial_times
1 Received: 01 Sep 2016 - Accepted: 03 Jan 2017
                                                  keywords
1 Brassica rapa, Seed coat color, SSR markers, Genetic map</code></pre>
</div>
</div>
<p>A quick exercise of the use of <code>mutate</code> and <code>gsub</code> to clean a text string. The position of <code>.*</code> in the target pattern decides if the text to erase is before or after. More information on the use of <code>gsub()</code> and <code>.*</code> can be found here: <a href="https://statisticsglobe.com/r-remove-characters-before-or-after-point-in-string">Remove Characters Before or After Point in String in R (Example)</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">article_df_clean<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>article_df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb10-2">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Delete everything before "Received:"</span></span>
<span id="cb10-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Received=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gsub</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".*Received:"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>,editorial_times),</span>
<span id="cb10-4">         <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Delete everything after "-"</span></span>
<span id="cb10-5">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Received=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gsub</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"-.*"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>,Received))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb10-6">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Delete everything before "Accepted:"</span></span>
<span id="cb10-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Accepted=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gsub</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".*Accepted:"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>,editorial_times))</span>
<span id="cb10-8"></span>
<span id="cb10-9">article_df_clean</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                editorial_times
1 Received: 01 Sep 2016 - Accepted: 03 Jan 2017
                                                  keywords      Received
1 Brassica rapa, Seed coat color, SSR markers, Genetic map  01 Sep 2016 
      Accepted
1  03 Jan 2017</code></pre>
</div>
</div>
<p>Now that we have the target information from one article, is time to apply this to a larger pool of articles.</p>
</section>
<section id="step-3-robots-and-sitemaps" class="level3">
<h3 class="anchored" data-anchor-id="step-3-robots-and-sitemaps">Step 3: Robots and Sitemaps</h3>
<p>If only we could find a list of articles to work with…</p>
<p>Luckily websites often come with a sitemap for engines (e.g.&nbsp;Google) to be able to crawl this information and index it. Where to find this sitemap? Often, the sitemap address can be found on the <code>robots.txt</code> file, hosted in the website.</p>
<p>The Company of Biologists main website URL is <code>https://journals.biologists.com</code>. By adding /<code>robots.txt</code> to the URL (<code>https://journals.biologists.com/robots.txt</code>) we find a information on what is available and out of bounds for crawlers. Sometimes (this is not the case), this file includes information on best practices for text mining (e.g.&nbsp;polite web-scraping speed).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pgomba.github.io/pgb_website/posts/18_10_23/sitemap.PNG" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">robots.txt - screenshot</figcaption>
</figure>
</div>
<p>Let´s take a peek to the sitemap now:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pgomba.github.io/pgb_website/posts/18_10_23/sitemap2.PNG" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Sitemap - Part I - screenshot</figcaption>
</figure>
</div>
<p>The sitemap contains seven <code>.xml</code> links. Every publisher has their own ecosystem of sitemaps. Some are more complicated to understand than others. On this one is fair to assume they have a sitemap for each of the journals of The Company of Biologists, and we just need to keep digging further to find our target (Biology Open). Let´s now travel to the first link: <a href="https://journals.biologists.com/data/sitemap/Site_1000001/sitemap_J1000003.xml" class="uri">https://journals.biologists.com/data/sitemap/Site_1000001/sitemap_J1000003.xml</a></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pgomba.github.io/pgb_website/posts/18_10_23/sitemap3.PNG" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Another sitemap! - screenshot</figcaption>
</figure>
</div>
<p>And its another sitemap. At least this one seems to be organized by dates, but we still don´t know for which journal they are. Let´s go find what is inside the URL <a href="https://journals.biologists.com/data/sitemap/Site_1000001/J1000003/manifest_2012.xml" class="uri">https://journals.biologists.com/data/sitemap/Site_1000001/J1000003/manifest_2012.xml</a></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pgomba.github.io/pgb_website/posts/18_10_23/sitemap4.PNG" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Surprise, another sitemap - screenshot</figcaption>
</figure>
</div>
<p>This time we finally strike gold. This seems to be a list of articles, from 2012, and from the URL (<code>https://journals.biologists.com/bio/</code>) I can see they all belong to Biology Open. In any case, is always worth travelling across different sitemaps to understand the architecture of the website and ensure we are not missing anything.</p>
</section>
<section id="step4-obtaining-the-list-of-articles" class="level3">
<h3 class="anchored" data-anchor-id="step4-obtaining-the-list-of-articles">Step4: Obtaining the list of articles</h3>
<p>Now we know were to find a list of articles. Let´s say we want a list with all Biology Open articles (2012 to present. How do we get that? Notice in the sitemap, the URL address for each year, is wrapped on a <code>loc</code> node. This is what we are after to start with:</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-5_144e98983d5c02b0f723ef192f862a7c">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">each_year_sitemap<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_html</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://journals.biologists.com/data/sitemap/Site_1000001/sitemap_J1000003.xml"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb12-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_nodes</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"loc"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb12-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text</span>()</span>
<span id="cb12-4"></span>
<span id="cb12-5">each_year_sitemap[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>]</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "https://journals.biologists.com/data/sitemap/Site_1000001/J1000003/manifest_2012.xml"
[2] "https://journals.biologists.com/data/sitemap/Site_1000001/J1000003/manifest_2013.xml"
[3] "https://journals.biologists.com/data/sitemap/Site_1000001/J1000003/manifest_2014.xml"
[4] "https://journals.biologists.com/data/sitemap/Site_1000001/J1000003/manifest_2015.xml"
[5] "https://journals.biologists.com/data/sitemap/Site_1000001/J1000003/manifest_2016.xml"</code></pre>
</div>
</div>
<p>And we can now use <code>each_year_sitemap</code> in a loop to extract the articles for each of the years and store the links in <code>URL_data_frame</code>, which should have &gt; 3,000 articles.</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-6_593f65ac76c4ce1978f9d886c910e99c">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1">URL_data_frame<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>()</span>
<span id="cb14-2"></span>
<span id="cb14-3"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> each_year_sitemap) {</span>
<span id="cb14-4">  </span>
<span id="cb14-5">  articles<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_html</span>(i)</span>
<span id="cb14-6">  </span>
<span id="cb14-7">  URL<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>articles<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb14-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_nodes</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"loc"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb14-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>()</span>
<span id="cb14-10">  </span>
<span id="cb14-11">  URL_data_frame<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bind_rows</span>(URL_data_frame, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.data.frame</span>(URL))</span>
<span id="cb14-12">  </span>
<span id="cb14-13">}</span>
<span id="cb14-14"></span>
<span id="cb14-15"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(URL_data_frame)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3031</code></pre>
</div>
</div>
</section>
<section id="step-5-the-loop" class="level3">
<h3 class="anchored" data-anchor-id="step-5-the-loop">Step 5: The Loop</h3>
<p>The loop is only slightly different to those built for the other two blogs. Keep in mind each loop is a request to a host server. A large volume or request in little time is likely to get you banned (for some time or undefinitely) from the host server. The key here is find a balance to avoid this. The speed at which each instance of the loop happens depends on host server response, computer speed and internet download speed. To avoid getting kicked out we are going to add an extra one second delay using the function <code>Sys.sleep(1)</code>.</p>
<p>Because extracting the data from the articles is at least going to take 3,000 seconds (50 min.) I´m going to recreate the example with a sub-sample of 200 articles</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1">article_info<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>() <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Empty data frame to store extracted data</span></span>
<span id="cb16-2">URLs<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sample</span>(URL_data_frame<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>URL,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Grab a sample of 100 articles and store them in vector form.</span></span>
<span id="cb16-3"></span>
<span id="cb16-4">progress_bar<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">txtProgressBar</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">min =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">max =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(URLs), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">initial =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">style =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span>
<span id="cb16-5"></span>
<span id="cb16-6">count<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb16-7"></span>
<span id="cb16-8"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> URLs) {</span>
<span id="cb16-9">  </span>
<span id="cb16-10">  article<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_html</span>(i)</span>
<span id="cb16-11">  </span>
<span id="cb16-12">  editorial_state<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>article<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb16-13">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_nodes</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".wi-state"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb16-14">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>()</span>
<span id="cb16-15">  </span>
<span id="cb16-16">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">identical</span>(editorial_state,<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">character</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>))) {</span>
<span id="cb16-17">    editorial_state<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Not available"</span></span>
<span id="cb16-18">  } <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> {</span>
<span id="cb16-19">    editorial_state<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>editorial_state}</span>
<span id="cb16-20">  </span>
<span id="cb16-21">  editorial_date<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>article<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb16-22">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_nodes</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".wi-date"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb16-23">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>()</span>
<span id="cb16-24">  </span>
<span id="cb16-25">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">identical</span>(editorial_date,<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">character</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>))) {</span>
<span id="cb16-26">    editorial_date<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Not available"</span></span>
<span id="cb16-27">  } <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> {</span>
<span id="cb16-28">    editorial_date<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>editorial_date}</span>
<span id="cb16-29">  </span>
<span id="cb16-30">  editorial_times<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(editorial_state,editorial_date,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">collapse =</span>  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" - "</span>)</span>
<span id="cb16-31">  </span>
<span id="cb16-32">  keywords<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>article<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb16-33">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_nodes</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".content-metadata-keywords a"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb16-34">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>()</span>
<span id="cb16-35">  </span>
<span id="cb16-36">  keywords <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(keywords,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">collapse =</span>  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">", "</span>)</span>
<span id="cb16-37">  </span>
<span id="cb16-38">  temp_df<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(i,editorial_times,keywords)</span>
<span id="cb16-39">  </span>
<span id="cb16-40">  article_info<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bind_rows</span>(article_info,temp_df)</span>
<span id="cb16-41">  </span>
<span id="cb16-42">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Sys.sleep</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Manual delay</span></span>
<span id="cb16-43">  count<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>count<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb16-44">  </span>
<span id="cb16-45">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">setTxtProgressBar</span>(progress_bar,count) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#progress bar</span></span>
<span id="cb16-46"></span>
<span id="cb16-47">  </span>
<span id="cb16-48">}</span>
<span id="cb16-49"></span>
<span id="cb16-50"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">close</span>(progress_bar) </span></code></pre></div>
</div>
<p>Check the object <code>article_info</code>. You might notice some articles don´t have the information we were looking for, but when you navigate into the website the information is there. This is because (in this particular case), the host server is “experiencing unusual traffic”. Instead of kicking us out of the server is redirecting to a different page. Let´s be patient, and increase the Sys.sleep() to 5 seconds and hope for better results.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1">article_info<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>() <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Empty data frame to store extracted data</span></span>
<span id="cb17-2">URLs<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sample</span>(URL_data_frame<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>URL,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Grab a sample of 100 articles and store them in vector form.</span></span>
<span id="cb17-3"></span>
<span id="cb17-4">progress_bar<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">txtProgressBar</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">min =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">max =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(URLs), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">initial =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">style =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span>
<span id="cb17-5"></span>
<span id="cb17-6">count<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb17-7"></span>
<span id="cb17-8"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> URLs) {</span>
<span id="cb17-9">  </span>
<span id="cb17-10">  article<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_html</span>(i)</span>
<span id="cb17-11">  </span>
<span id="cb17-12">  editorial_state<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>article<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb17-13">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_nodes</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".wi-state"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb17-14">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>()</span>
<span id="cb17-15">  </span>
<span id="cb17-16">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">identical</span>(editorial_state,<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">character</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>))) {</span>
<span id="cb17-17">    editorial_state<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Not available"</span></span>
<span id="cb17-18">  } <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> {</span>
<span id="cb17-19">    editorial_state<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>editorial_state}</span>
<span id="cb17-20">  </span>
<span id="cb17-21">  editorial_date<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>article<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb17-22">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_nodes</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".wi-date"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb17-23">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>()</span>
<span id="cb17-24">  </span>
<span id="cb17-25">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">identical</span>(editorial_date,<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">character</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>))) {</span>
<span id="cb17-26">    editorial_date<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Not available"</span></span>
<span id="cb17-27">  } <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> {</span>
<span id="cb17-28">    editorial_date<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>editorial_date}</span>
<span id="cb17-29">  </span>
<span id="cb17-30">  editorial_times<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(editorial_state,editorial_date,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">collapse =</span>  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" - "</span>)</span>
<span id="cb17-31">  </span>
<span id="cb17-32">  keywords<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>article<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb17-33">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_nodes</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".content-metadata-keywords a"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb17-34">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>()</span>
<span id="cb17-35">  </span>
<span id="cb17-36">  keywords <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(keywords,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">collapse =</span>  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">", "</span>)</span>
<span id="cb17-37">  </span>
<span id="cb17-38">  temp_df<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(i,editorial_times,keywords)</span>
<span id="cb17-39">  </span>
<span id="cb17-40">  article_info<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bind_rows</span>(article_info,temp_df)</span>
<span id="cb17-41">  </span>
<span id="cb17-42">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Sys.sleep</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Manual delay - 5 seconds</span></span>
<span id="cb17-43">  count<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>count<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb17-44">  </span>
<span id="cb17-45">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">setTxtProgressBar</span>(progress_bar,count) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#progress bar</span></span>
<span id="cb17-46"></span>
<span id="cb17-47">  </span>
<span id="cb17-48">}</span>
<span id="cb17-49"></span>
<span id="cb17-50"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">close</span>(progress_bar) </span></code></pre></div>
</div>
<p>Check the object <code>article_info</code>. Slightly better now? This is why is important to find the right balance finding the best time for each instance of the loop… which usually mean you are going to spend weeks/months when targeting LARGE volumes of articles.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(article_info,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span></code></pre></div>
</div>
</section>
<section id="extra" class="level3">
<h3 class="anchored" data-anchor-id="extra">Extra</h3>
<p>There is no need to restart the loop if some data is missing. Is easier to filter the URLs without info and feed these to the loop again.</p>
</section>
<section id="references" class="level3">
<h3 class="anchored" data-anchor-id="references">References:</h3>
<p>Gómez Barreiro, P. (2023). Text-mining a Taylor &amp; Francis journal using R. <a href="https://pagomba-blog.netlify.app/posts/11_10_23//" class="uri">https://pagomba-blog.netlify.app/posts/11_10_23/</a></p>
<p>Gómez Barreiro, P. (2023). Text-mining PLOS articles using R. <a href="https://pagomba-blog.netlify.app/posts/08_10_23/" class="uri">https://pagomba-blog.netlify.app/posts/08_10_23/</a></p>
<p>Hanson, M. A., Gómez Barreiro, P., Crosetto, P., &amp; Brockington, D. (2023). <em>arXiv</em>. The Strain on Scientific Publishing. <a href="https://arxiv.org/abs/2309.15884" class="uri">https://arxiv.org/abs/2309.15884</a></p>
<p>Wickham H (2022). rvest: Easily Harvest (Scrape) Web Pages. R package version 1.0.3. &lt;https://CRAN.R-project.org/package=rvest&gt;</p>
<p>Wickham H, et al.&nbsp;(2019) “Welcome to the tidyverse.” <em>Journal of Open Source Software</em>, 4 (43), 1686. doi: <a href="https://doi.org/10.21105/joss.01686" class="uri">https://doi.org/10.21105/joss.01686</a></p>
<p><br> Last update: 18 Nov 2023</p>


</section>

 ]]></description>
  <category>Biology Open</category>
  <category>R</category>
  <category>Text-mining</category>
  <category>The Strain on Scientific Publishing</category>
  <category>Web-scraping</category>
  <guid>https://pgomba.github.io/pgb_website/posts/18_10_23/index.html</guid>
  <pubDate>Tue, 17 Oct 2023 23:00:00 GMT</pubDate>
  <media:content url="https://pgomba.github.io/pgb_website/posts/18_10_23/thumbn.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Text-mining a Taylor &amp; Francis journal using R</title>
  <dc:creator>Pablo Gómez Barreiro</dc:creator>
  <link>https://pgomba.github.io/pgb_website/posts/11_10_23/index.html</link>
  <description><![CDATA[ 



<p>This is the second tutorial/blog exploring some of text-mining/web-scraping methods used on the preprint (<a href="https://arxiv.org/abs/2309.15884">The Strain on Scientific Publishing</a>). Head over to <a href="https://pagomba-blog.netlify.app/posts/08_10_23/">Text-mining PLOS articles using R</a> to read the first instance. Today, I will be focusing on <a href="https://taylorandfrancis.com/">Taylor &amp; Francis</a> (T&amp;F)</p>
<p>To some extent, Taylor &amp; Francis allows web scraping their website. To do so you have to be a subscriber to their content, have a non-commercial purpose and send a request. This can take some time, and, in the meantime, any web scraping attempts will return an <strong>Error 403</strong> (access forbidden). Fortunately, editorial times of scientific articles from T&amp;F are available on <a href="https://www.crossref.org">Crossref</a>, and their API can be accessed with R using the package <a href="https://CRAN.R-project.org/package=rcrossref"><code>rcrossref</code></a>.</p>
<section id="step-1-be-polite" class="level3">
<h3 class="anchored" data-anchor-id="step-1-be-polite">Step 1: Be polite</h3>
<p><code>rcrossref</code> encourages their users to identify themselves in every query. This is a straight forward process that is well documented <a href="https://github.com/ropensci/rcrossref">here</a>:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://github.com/ropensci/rcrossref"><img src="https://pgomba.github.io/pgb_website/posts/11_10_23/polite.PNG" class="img-fluid figure-img"></a></p>
<figcaption class="figure-caption">rcrossref GitHub repository - screenshot</figcaption>
</figure>
</div>
<p>After restarting your R session, is time to load all necessary libraries</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(rcrossref)</span></code></pre></div>
</div>
</section>
<section id="step-2-choosing-a-journal" class="level3">
<h3 class="anchored" data-anchor-id="step-2-choosing-a-journal">Step 2: Choosing a journal</h3>
<p><code>rcrossref</code> is going to need a ISSN number to go fetch data. This number is usually available in the journal description page. For this example I´m going to choose the journal <a href="https://www.tandfonline.com/journals/tped20">Plant Ecology &amp; Diversity</a>. The ISSNs (Print and online version) can be found on its <a href="https://www.tandfonline.com/action/journalInformation?journalCode=tped20">Journal Information</a> page: 1755-0874 &amp; 1755-1668.</p>
<p>To get a hint of what we might find using Crossref data on this journal we can take a peak in <a href="https://www.scimagojr.com/">Scimago</a>. If you type in and search the journal name or the ISSNs there is some useful information. In particular, the total number of documents is of interest. The larger the number of available documents is, the longer obtaining the data from <code>rcrossref</code> will take (and it can get tedious with LARGE requests).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pgomba.github.io/pgb_website/posts/11_10_23/scimago.PNG" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Total number of documents for the journal Plant Ecology &amp; Diversity, according to Scimago - screenshot</figcaption>
</figure>
</div>
</section>
<section id="step-3-go-fetch" class="level3">
<h3 class="anchored" data-anchor-id="step-3-go-fetch">Step 3: Go fetch!</h3>
<p>Let´s build now the data request using R code using the <code>rcrossref</code> function <code>cr_works()</code>. I´m going to use the online ISSN (1755-1668) and select only publications published in 2015 and after. If you wish to obtain data from all publications just drop <code>from_pub_date="2015-01-01</code> from the code below. Additionally, we set the parameter <code>cursor</code> to not have a limit in number of articles by just adding an unreasonable high number. For more information on how <code>rcrossref</code> and <code>cr_works()</code> can be used head to their documentation page <a href="https://docs.ropensci.org/rcrossref/index.html">here</a>.</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-2_85818a8c9ae02f90d9c52901a47e09fe">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">journal_info<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cr_works</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">filter=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">issn=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1755-1668"</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">from_pub_date=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2015-01-01"</span>),<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cursor =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"*"</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cursor_max =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">500000</span>)</span></code></pre></div>
</div>
<p>Once the code is running, it might take some minutes for the data to come back. When finished, the object <code>journal_info</code> will be a large list with 3 elements. Let´s have a look to what is inside this object on <strong>Step 4</strong>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pgomba.github.io/pgb_website/posts/11_10_23/journal_info.PNG" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">journal_info is a large list with 3 elements</figcaption>
</figure>
</div>
</section>
<section id="step4-unboxing-journal_info" class="level3">
<h3 class="anchored" data-anchor-id="step4-unboxing-journal_info">Step4: Unboxing “journal_info”</h3>
<p>Now that we have <code>rcrossref</code> output (<code>journal_info</code>), lets have a look to the elements within. The first element is <code>meta</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">journal_info<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>meta[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>]</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  total_results search_terms start_index items_per_page
1           309           NA           0             20</code></pre>
</div>
</div>
<p>This is a data frame incicating we have obtained all the Crossref data available for 309 scientific publications.</p>
<p>This information is contained in the element <code>data</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(journal_info<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>data,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 35
   alternative.id              container.title created deposited published.print
   &lt;chr&gt;                       &lt;chr&gt;           &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;          
 1 10.1080/17550874.2018.1496… Plant Ecology … 2018-0… 2020-09-… 2018-05-04     
 2 10.1080/17550874.2019.1641… Plant Ecology … 2019-0… 2020-08-… 2019-09-03     
 3 10.1080/17550874.2017.1287… Plant Ecology … 2017-0… 2022-07-… 2017-01-02     
 4 10.1080/17550874.2018.1503… Plant Ecology … 2018-0… 2020-09-… 2018-03-04     
 5 10.1080/17550874.2019.1709… Plant Ecology … 2020-0… 2020-03-… 2020-01-02     
 6 10.1080/17550874.2019.1610… Plant Ecology … 2019-0… 2022-09-… 2019-03-04     
 7 10.1080/17550874.2018.1507… Plant Ecology … 2018-0… 2020-09-… 2018-05-04     
 8 10.1080/17550874.2019.1593… Plant Ecology … 2019-0… 2020-12-… 2019-03-04     
 9 10.1080/17550874.2015.1049… Plant Ecology … 2015-0… 2016-12-… 2015-07-04     
10 10.1080/17550874.2020.1846… Plant Ecology … 2020-1… 2021-08-… 2020-11-01     
# ℹ 30 more variables: published.online &lt;chr&gt;, doi &lt;chr&gt;, indexed &lt;chr&gt;,
#   issn &lt;chr&gt;, issue &lt;chr&gt;, issued &lt;chr&gt;, member &lt;chr&gt;, page &lt;chr&gt;,
#   prefix &lt;chr&gt;, publisher &lt;chr&gt;, score &lt;chr&gt;, source &lt;chr&gt;,
#   reference.count &lt;chr&gt;, references.count &lt;chr&gt;,
#   is.referenced.by.count &lt;chr&gt;, subject &lt;chr&gt;, title &lt;chr&gt;, type &lt;chr&gt;,
#   update.policy &lt;chr&gt;, url &lt;chr&gt;, volume &lt;chr&gt;, language &lt;chr&gt;,
#   short.container.title &lt;chr&gt;, assertion &lt;list&gt;, author &lt;list&gt;, …</code></pre>
</div>
</div>
<p>For this journal, this element is a data frame of 35 columns. Notice some of the columns (e.g.&nbsp;<code>assertion</code>) are also data frames (inception). Have a look to what information each column has to offer. Where is the editorial data we are looking for? Well, lets take a peak to the values within the tables of the column <code>assertion</code> in row number 1</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">journal_info<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>data<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>assertion[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
# A tibble: 5 × 7
  value                           order name  label URL   group.name group.label
  &lt;chr&gt;                           &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;      
1 The publishing and review poli…     1 peer… Peer… &lt;NA&gt;  &lt;NA&gt;       &lt;NA&gt;       
2 http://www.tandfonline.com/act…     2 aims… Aim … http… &lt;NA&gt;       &lt;NA&gt;       
3 2018-01-13                          0 rece… Rece… &lt;NA&gt;  publicati… Publicatio…
4 2018-06-30                          2 acce… Acce… &lt;NA&gt;  publicati… Publicatio…
5 2018-07-19                          3 publ… Publ… &lt;NA&gt;  publicati… Publicatio…</code></pre>
</div>
</div>
<p>There we go. The date values for editorial times are “hidden” in this table. Let´s clean the data to show this better</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">received_date <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> journal_info<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>data<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>assertion[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.data.frame</span>()<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(name<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"received"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(value)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-5">  .[[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]]</span>
<span id="cb9-6"></span>
<span id="cb9-7">accepted_date <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> journal_info<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>data<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>assertion[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.data.frame</span>()<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(name<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"accepted"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(value)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-11">  .[[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]]</span>
<span id="cb9-12"></span>
<span id="cb9-13">received_date</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2018-01-13"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">accepted_date</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2018-06-30"</code></pre>
</div>
</div>
</section>
<section id="step-5-looping-to-extract-all-journal-info" class="level3">
<h3 class="anchored" data-anchor-id="step-5-looping-to-extract-all-journal-info">Step 5: Looping to extract all journal info</h3>
<p>So far we know how to extract editorial data from one article. Let´s adapt some of the code from the PLOS blog to extract data for all articles in <code>journal_info</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1">final_table<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>()</span>
<span id="cb13-2">count<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb13-3"></span>
<span id="cb13-4"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(journal_info<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>data)) { <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#code to loop through each row of the data frame</span></span>
<span id="cb13-5">  </span>
<span id="cb13-6">  doi<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>journal_info<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>data[i,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]</span>
<span id="cb13-7">  </span>
<span id="cb13-8">  reference_count<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>journal_info<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>data[i,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">18</span>] <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#lets add number of references too</span></span>
<span id="cb13-9">  </span>
<span id="cb13-10">  received_date <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> journal_info<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>data<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>assertion[i] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb13-11">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.data.frame</span>()<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb13-12">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(name<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"received"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb13-13">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(value)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb13-14">    .[[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]]</span>
<span id="cb13-15">  </span>
<span id="cb13-16">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">identical</span>(received_date,<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">character</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>))) {</span>
<span id="cb13-17">    received_date<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Not available"</span></span>
<span id="cb13-18">  } <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> {</span>
<span id="cb13-19">    received_date<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>received_date}</span>
<span id="cb13-20">  </span>
<span id="cb13-21">  accepted_date <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> journal_info<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>data<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>assertion[i] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb13-22">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.data.frame</span>()<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb13-23">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(name<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"accepted"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb13-24">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(value)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb13-25">    .[[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]]</span>
<span id="cb13-26">  </span>
<span id="cb13-27">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">identical</span>(accepted_date,<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">character</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>))) {</span>
<span id="cb13-28">    accepted_date<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Not available"</span></span>
<span id="cb13-29">  } <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> {</span>
<span id="cb13-30">    accepted_date<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>accepted_date}</span>
<span id="cb13-31">  </span>
<span id="cb13-32">  temp_df<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(i,doi,received_date,accepted_date,reference_count)</span>
<span id="cb13-33">  final_table<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bind_rows</span>(final_table,temp_df)</span>
<span id="cb13-34">  </span>
<span id="cb13-35">  count<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>count<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb13-36">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(count)</span>
<span id="cb13-37">  </span>
<span id="cb13-38">}</span></code></pre></div>
</div>
<p>A quick peek into final_table shows we have now some data we can use in further analysis</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(final_table,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    i                alternative.id received_date accepted_date reference.count
1   1 10.1080/17550874.2018.1496365    2018-01-13    2018-06-30              57
2   2 10.1080/17550874.2019.1641756    2018-06-26    2019-07-06              73
3   3 10.1080/17550874.2017.1287224    2016-07-07    2017-01-23              58
4   4 10.1080/17550874.2018.1503843 Not available Not available               0
5   5 10.1080/17550874.2019.1709227    2018-10-04    2019-12-22              67
6   6 10.1080/17550874.2019.1610915    2018-06-20    2019-04-13              55
7   7 10.1080/17550874.2018.1507054    2017-11-29    2018-07-29              36
8   8 10.1080/17550874.2019.1593544    2017-01-09    2019-02-06              73
9   9 10.1080/17550874.2015.1049234 Not available Not available              39
10 10 10.1080/17550874.2020.1846218    2018-01-08    2020-10-27             102
11 11 10.1080/17550874.2022.2122753    2021-12-20    2022-09-05             128
12 12 10.1080/17550874.2022.2160674    2022-06-20    2022-12-16              57
13 13 10.1080/17550874.2019.1626509    2018-10-29    2019-05-24              99
14 14 10.1080/17550874.2019.1613696    2018-11-18    2019-04-27              65
15 15 10.1080/17550874.2016.1261950    2016-06-16    2016-11-14              46</code></pre>
</div>
</div>
</section>
<section id="extra" class="level3">
<h3 class="anchored" data-anchor-id="extra">Extra</h3>
<p>Extracting all scientific articles from T&amp;F using Crossref data is possible, but you will need a list (or a vector) containing all ISSNs to be targeted. These can be obtained from Scimago, although many non-indexed journals will be missing. Then, is just a matter of wrapping the above loop into another loop moving across all ISSNs:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> vector_with_ISSNS) {</span>
<span id="cb16-2">  </span>
<span id="cb16-3">  journal_info<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cr_works</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">filter=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">issn=</span>i,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">from_pub_date=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2015-01-01"</span>),<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cursor =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"*"</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cursor_max =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">500000</span>)</span>
<span id="cb16-4">  </span>
<span id="cb16-5">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (j <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> journal_info<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>data) {</span>
<span id="cb16-6">    <span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">#### etc etc </span><span class="al" style="color: #AD0000;
background-color: null;
font-style: inherit;">###</span></span>
<span id="cb16-7">  }</span>
<span id="cb16-8">    </span>
<span id="cb16-9">}</span></code></pre></div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="Tip">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>It is possible for Crossref to kick you out of their server after too many requests. Edit the loop to start from the last text-mined journal (e.g.&nbsp;<code>for (i in vector_with_ISSNS[200:4000]) {}</code>) to overcome this issue. Or, have a look to how errors can be handled with the function <code>tryCatch()</code>.</p>
</div>
</div>
</section>
<section id="references" class="level3">
<h3 class="anchored" data-anchor-id="references">References:</h3>
<p>Chamberlain S, Zhu H, Jahn N, Boettiger C, Ram K (2022). rcrossref: Client for Various ‘CrossRef APIs’. R package version 1.2.0, <a href="https://CRAN.R-project.org/package=rcrossref" class="uri">https://CRAN.R-project.org/package=rcrossref</a>.<br>
<br>
Gómez Barreiro, P. (2023). Text-mining PLOS articles using R. <a href="https://pagomba-blog.netlify.app/posts/08_10_23/" class="uri">https://pagomba-blog.netlify.app/posts/08_10_23/</a></p>
<p>Hanson, M. A., Gómez Barreiro, P., Crosetto, P., &amp; Brockington, D. (2023). <em>arXiv</em>. The Strain on Scientific Publishing. <a href="https://arxiv.org/abs/2309.15884" class="uri">https://arxiv.org/abs/2309.15884</a></p>
<p>Wickham H, et al.&nbsp;(2019) “Welcome to the tidyverse.” <em>Journal of Open Source Software</em>, 4 (43), 1686. doi: <a href="https://doi.org/10.21105/joss.01686" class="uri">https://doi.org/10.21105/joss.01686</a></p>
<p><br> Last update: 18 Nov 2023</p>


</section>

 ]]></description>
  <category>R</category>
  <category>rcrossref</category>
  <category>Taylor &amp; Francis</category>
  <category>Text-mining</category>
  <category>The Strain on Scientific Publishing</category>
  <guid>https://pgomba.github.io/pgb_website/posts/11_10_23/index.html</guid>
  <pubDate>Tue, 10 Oct 2023 23:00:00 GMT</pubDate>
  <media:content url="https://pgomba.github.io/pgb_website/posts/11_10_23/thumbn.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Text-mining PLOS articles using R</title>
  <dc:creator>Pablo Gómez Barreiro</dc:creator>
  <link>https://pgomba.github.io/pgb_website/posts/08_10_23/index.html</link>
  <description><![CDATA[ 



<p>On a recent preprint (<a href="https://arxiv.org/abs/2309.15884">The Strain on Scientific Publishing</a>) we used diverse methods to web-scrap and text-mine millions of scientific articles, with emphasis in editorial times and special issues.</p>
<p>One of the easiest data sets to obtain comes from <a href="https://plos.org/">PLOS</a> (Public Library of Science), a publisher that encourages the use of text-mining on their articles. Other publishing houses do this too, but PLOS goes beyond and provides a link to download their whole corpus (<a href="https://plos.org/text-and-data-mining/">Link here</a>), encouraging people to share the results using the hashtag <code>#allofplos</code>. This blog intends to be a step by step tutorial to text-mine PLOS data using R. I´m fairly sure there are ways to improve the efficiency of this methods. Let me know if you have one!</p>
<section id="step-1-download-the-data" class="level3">
<h3 class="anchored" data-anchor-id="step-1-download-the-data">Step 1: Download the data</h3>
<p>Head to PLOS text-mining section <a href="https://plos.org/text-and-data-mining/" title="click here to head to PLOS text-mining section">here</a> and click the button <code>Download Every PLOS article</code>. As of Oct 23, this is a 7.7Gb .zip file, meaning that depending on the download speed you might have to wait for a while. It´s ok, I´ll see you in <strong>Step 2</strong>!</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://plos.org/text-and-data-mining/"><img src="https://pgomba.github.io/pgb_website/posts/08_10_23/plos_web_capture.PNG" class="img-fluid figure-img" alt="PLOS corpus download button screenshoot"></a></p>
<figcaption class="figure-caption">PLOS corpus download button - screenshoot</figcaption>
</figure>
</div>
</section>
<section id="step-2-unzipping" class="level3">
<h3 class="anchored" data-anchor-id="step-2-unzipping">Step 2: Unzipping</h3>
<p>Time to unzip the file <code>allofplos.zip</code> .This again, is going to take some time. You can unzip a file using R with the function <code>utils::unzip()</code> . Keep in mind the uncompressed file is going to take at least 37 Gb of space in your disk!</p>
<p>While we are here waiting, you can already see the name of each article file contains useful information. In the image below we see the file <code>journal.pone.0241922.xml</code> . The code “pone” means this particular article belongs to the jorunal PLOS ONE. If later you want to extract the journal code, you can use the R function <code>gsub()</code> in the file name. We won´t do this here, as we intend to extract the journal name directly from the .xml file.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pgomba.github.io/pgb_website/posts/08_10_23/unzip_caption.PNG" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Unzipping allofplos.zip might take some time... - screenshot</figcaption>
</figure>
</div>
</section>
<section id="step-3-warm-up-text-mining-one-article" class="level3">
<h3 class="anchored" data-anchor-id="step-3-warm-up-text-mining-one-article">Step 3: Warm up / text-mining one article</h3>
<p>We are going to be using R packages <code>rvest</code> (for text-mining) and some of the packages contained in the <code>tidyverse</code> (e.g.<code>dplyr</code>, <code>magrittr</code>, <code>lubridate</code>, <code>stringr</code>) for data wrangling and processing.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(rvest)</span></code></pre></div>
</div>
<p>I´m also going to set up the unzipped folder as the working directory. You can do this with the code: <code>setwd("C:/Users/YOUR_USER/Downloads/allofplos")</code>.</p>
<p>Let´s pick up an article to play with. For example this article from PLOS ONE: <a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0264546">Typology, network features and damage response in worldwide urban road systems</a>. We are going to collect information on editorial times (when was the article submitted and accepted) and whether if it belongs or not to a collection issue.</p>
<p>To do so, we are going to target the “nodes” where the information is contained. This article can be found in the <code>allofplos</code>. Search for the file <code>journal.pone.0264546.xml</code> and open it with Notepad. Here you will find all the information on the website is available in text format. For example, the journal name is within the node <code>&lt;journal-id journal-id-type="nlm-ta"&gt;PLoS ONE&lt;/journal-id&gt;</code> , confirmation of this article being part of a collection can be found here: <code>&lt;pub-date pub-type="collection"&gt;</code> , and editorial times (received and accepted) can be found at <code>&lt;date date-type="received"&gt;</code> and <code>&lt;date date-type="accepted"&gt;</code>, respectively. Let´s get to work:</p>
<p>First, we read and store in an object the .xml file</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Use read_html to "read" a .xml file</span></span>
<span id="cb2-2">article<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_html</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"journal.pone.0264546.xml"</span>)</span></code></pre></div>
</div>
<p>Now we are going to look for the name of the journal.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">journal_name<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>article<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_nodes</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"journal-id"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>()<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span>.[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]</span>
<span id="cb3-4"></span>
<span id="cb3-5">journal_name</span></code></pre></div>
</div>
<p>Let´s figure out if this article is part of a collection too.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">collection<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>article<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb4-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_nodes</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pub-date"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb4-3">  .[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb4-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pub-type"</span>)</span>
<span id="cb4-5"></span>
<span id="cb4-6"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (collection<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"collection"</span>){</span>
<span id="cb4-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Article is part of a collection"</span>)</span>
<span id="cb4-8">}<span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span>{</span>
<span id="cb4-9">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Article is not part of a collection"</span></span>
<span id="cb4-10">}</span></code></pre></div>
</div>
<p>Lastly (and slightly more complicated), lets obtain the dates when the article was received and accepted</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># target editorial times</span></span>
<span id="cb5-2"></span>
<span id="cb5-3">editorial<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>article<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb5-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_nodes</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"date"</span>)</span>
<span id="cb5-5"></span>
<span id="cb5-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># create objects containing date info</span></span>
<span id="cb5-7"></span>
<span id="cb5-8">received_nodeset<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>editorial[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">grepl</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"received"</span>, editorial)] </span>
<span id="cb5-9">accepted_nodeset<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>editorial[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">grepl</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"accepted"</span>, editorial)] </span>
<span id="cb5-10"></span>
<span id="cb5-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># transform nodesets to date (d-m-Y)</span></span>
<span id="cb5-12"></span>
<span id="cb5-13">received_date<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(received_nodeset<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_node</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"day"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>(),</span>
<span id="cb5-14">                     received_nodeset<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_node</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"month"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>(),</span>
<span id="cb5-15">                     received_nodeset<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_node</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"year"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>(),</span>
<span id="cb5-16">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"-"</span>)</span>
<span id="cb5-17"></span>
<span id="cb5-18">accepted_date<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(accepted_nodeset<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_node</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"day"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>(),</span>
<span id="cb5-19">                     accepted_nodeset<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_node</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"month"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>(),</span>
<span id="cb5-20">                     accepted_nodeset<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_node</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"year"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>(),</span>
<span id="cb5-21">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"-"</span>)</span>
<span id="cb5-22"></span>
<span id="cb5-23">received_date</span>
<span id="cb5-24">accepted_date</span></code></pre></div>
</div>
<p>Easy peasy until here. On <strong>Step 4</strong> we are going to get crafty and modify the code to fit a <code>for</code> loop, text-mine and store the extracted data from ALL PLOS articles.</p>
</section>
<section id="step-4.-mining-loops" class="level3">
<h3 class="anchored" data-anchor-id="step-4.-mining-loops">Step 4. Mining loops</h3>
<p>Basically now we just have to wrap the code in a loop to go through &gt;344k articles. My approach is to create a vector with all the .xml files in the folder and create an empty table (<code>final_table</code>) which will store the results of running the loop. Is probably more efficient to work with lists (instead of data frames) and parallelize the process to reduce wait times. But, to keep it simple, I will start here:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">list_of_articles<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list.files</span>()</span>
<span id="cb6-2"></span>
<span id="cb6-3">final_table<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>()</span>
<span id="cb6-4"></span>
<span id="cb6-5"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> list_of_articles) {</span>
<span id="cb6-6">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># the code goes here</span></span>
<span id="cb6-7">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># append text-mined data to final table code here</span></span>
<span id="cb6-8">}</span></code></pre></div>
</div>
<p>Now is time to adapt the code from <strong>Step 3</strong> for <code>i</code> to be the file name:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">list_of_articles<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list.files</span>()</span>
<span id="cb7-2"></span>
<span id="cb7-3">final_table<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>()</span>
<span id="cb7-4"></span>
<span id="cb7-5"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> list_of_articles) {</span>
<span id="cb7-6">  </span>
<span id="cb7-7">  article<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_html</span>(i) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Load article at the start of each instance</span></span>
<span id="cb7-8">  </span>
<span id="cb7-9">  journal_name<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>article<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb7-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_nodes</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"journal-id"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb7-11">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>()<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span>.[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]</span>
<span id="cb7-12">  </span>
<span id="cb7-13">  collection<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>article<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb7-14">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_nodes</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pub-date"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb7-15">    .[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb7-16">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pub-type"</span>)</span>
<span id="cb7-17">  </span>
<span id="cb7-18">  editorial<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>article<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb7-19">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_nodes</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"date"</span>)</span>
<span id="cb7-20">  </span>
<span id="cb7-21">  received_nodeset<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>editorial[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">grepl</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"received"</span>, editorial)] </span>
<span id="cb7-22">  accepted_nodeset<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>editorial[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">grepl</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"accepted"</span>, editorial)] </span>
<span id="cb7-23">  </span>
<span id="cb7-24">  </span>
<span id="cb7-25">  received_date<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(received_nodeset<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_node</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"day"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>(),</span>
<span id="cb7-26">                     received_nodeset<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_node</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"month"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>(),</span>
<span id="cb7-27">                     received_nodeset<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_node</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"year"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>(),</span>
<span id="cb7-28">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"-"</span>)</span>
<span id="cb7-29">  </span>
<span id="cb7-30">  accepted_date<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(accepted_nodeset<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_node</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"day"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>(),</span>
<span id="cb7-31">                     accepted_nodeset<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_node</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"month"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>(),</span>
<span id="cb7-32">                     accepted_nodeset<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_node</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"year"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>(),</span>
<span id="cb7-33">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"-"</span>)</span>
<span id="cb7-34">  </span>
<span id="cb7-35">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Let´s put all in a temporary data frame and append it to final_table!</span></span>
<span id="cb7-36">  </span>
<span id="cb7-37">  temp_df<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(i,journal_name,collection,received_date,accepted_date)</span>
<span id="cb7-38">  </span>
<span id="cb7-39">  final_table<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bind_rows</span>(final_table,temp_df)</span>
<span id="cb7-40">  </span>
<span id="cb7-41">  </span>
<span id="cb7-42">}</span></code></pre></div>
</div>
<p>and voilà! We have now a loop that in theory should work… but it does not. I see two issues already.</p>
<ol type="1">
<li><p>The column <code>collection</code> in the object <code>final table</code> is being populated with text different to the word “collection”. This means these articles are not part of collections. Let´s add some code to transform any word that is not the string “collection” in the column <code>collection</code> into “No”.</p></li>
<li><p>Sometimes an article does not have the editorial data we are looking for and the objects returns <code>character(empty)</code>. The temporary data frame <code>temp_df</code> can´t have this class of items. We are going to have to transform these into a string (e.g.&nbsp;“Not available”) to make it work.</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">list_of_articles<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list.files</span>()</span>
<span id="cb8-2"></span>
<span id="cb8-3">final_table<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>()</span>
<span id="cb8-4"></span>
<span id="cb8-5"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> list_of_articles) {</span>
<span id="cb8-6">  </span>
<span id="cb8-7">  article<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_html</span>(i) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Load article at the start of each instance</span></span>
<span id="cb8-8">  </span>
<span id="cb8-9">  journal_name<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>article<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb8-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_nodes</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"journal-id"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb8-11">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>()<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span>.[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]</span>
<span id="cb8-12">  </span>
<span id="cb8-13">  collection<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>article<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb8-14">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_nodes</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pub-date"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb8-15">    .[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb8-16">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pub-type"</span>)</span>
<span id="cb8-17">  </span>
<span id="cb8-18">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (collection<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"collection"</span>){</span>
<span id="cb8-19">    collection<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>collection</span>
<span id="cb8-20">  }<span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span>{</span>
<span id="cb8-21">    collection<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"No"</span></span>
<span id="cb8-22">  }</span>
<span id="cb8-23">  </span>
<span id="cb8-24">  editorial<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>article<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb8-25">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_nodes</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"date"</span>)</span>
<span id="cb8-26">  </span>
<span id="cb8-27">  received_nodeset<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>editorial[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">grepl</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"received"</span>, editorial)] </span>
<span id="cb8-28">  accepted_nodeset<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>editorial[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">grepl</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"accepted"</span>, editorial)] </span>
<span id="cb8-29">  </span>
<span id="cb8-30">  </span>
<span id="cb8-31">  received_date<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(received_nodeset<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_node</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"day"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>(),</span>
<span id="cb8-32">                     received_nodeset<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_node</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"month"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>(),</span>
<span id="cb8-33">                     received_nodeset<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_node</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"year"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>(),</span>
<span id="cb8-34">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"-"</span>)</span>
<span id="cb8-35">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">identical</span>(received_date,<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">character</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>))) {</span>
<span id="cb8-36">      received_date<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Not available"</span></span>
<span id="cb8-37">      } <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> {</span>
<span id="cb8-38">        received_date<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>received_date}</span>
<span id="cb8-39">  </span>
<span id="cb8-40">  accepted_date<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(accepted_nodeset<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_node</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"day"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>(),</span>
<span id="cb8-41">                     accepted_nodeset<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_node</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"month"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>(),</span>
<span id="cb8-42">                     accepted_nodeset<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_node</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"year"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>(),</span>
<span id="cb8-43">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"-"</span>)</span>
<span id="cb8-44">  </span>
<span id="cb8-45">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">identical</span>(accepted_date,<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">character</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>))) {</span>
<span id="cb8-46">      accepted_date<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Not available"</span></span>
<span id="cb8-47">      } <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> {</span>
<span id="cb8-48">        accepted_date<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>accepted_date}</span>
<span id="cb8-49">  </span>
<span id="cb8-50">  </span>
<span id="cb8-51">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Let´s put all in a temporary data frame and append it to final_table!</span></span>
<span id="cb8-52">  </span>
<span id="cb8-53">  temp_df<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(i,journal_name,collection,received_date,accepted_date)</span>
<span id="cb8-54">  </span>
<span id="cb8-55">  final_table<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bind_rows</span>(final_table,temp_df)</span>
<span id="cb8-56">  </span>
<span id="cb8-57">}  </span></code></pre></div>
</div>
<p>Well, the loop is going to be working now for quite some time. If you are using Rstudio, you can refresh the global environment to check which <code>i</code> the loop is at. But let´s add a counter to the loop too!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">list_of_articles<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list.files</span>()</span>
<span id="cb9-2">count<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb9-3">final_table<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>()</span>
<span id="cb9-4"></span>
<span id="cb9-5"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> list_of_articles) {</span>
<span id="cb9-6">  </span>
<span id="cb9-7">  article<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_html</span>(i) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Load article at the start of each instance</span></span>
<span id="cb9-8">  </span>
<span id="cb9-9">  journal_name<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>article<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_nodes</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"journal-id"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-11">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>()<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span>.[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]</span>
<span id="cb9-12">  </span>
<span id="cb9-13">  collection<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>article<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-14">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_nodes</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pub-date"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-15">    .[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-16">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pub-type"</span>)</span>
<span id="cb9-17">  </span>
<span id="cb9-18">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (collection<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"collection"</span>){</span>
<span id="cb9-19">    collection<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>collection</span>
<span id="cb9-20">  }<span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span>{</span>
<span id="cb9-21">    collection<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"No"</span></span>
<span id="cb9-22">  }</span>
<span id="cb9-23">  </span>
<span id="cb9-24">  editorial<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>article<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-25">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_nodes</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"date"</span>)</span>
<span id="cb9-26">  </span>
<span id="cb9-27">  received_nodeset<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>editorial[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">grepl</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"received"</span>, editorial)] </span>
<span id="cb9-28">  accepted_nodeset<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>editorial[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">grepl</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"accepted"</span>, editorial)] </span>
<span id="cb9-29">  </span>
<span id="cb9-30">  </span>
<span id="cb9-31">  received_date<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(received_nodeset<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_node</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"day"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>(),</span>
<span id="cb9-32">                     received_nodeset<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_node</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"month"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>(),</span>
<span id="cb9-33">                     received_nodeset<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_node</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"year"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>(),</span>
<span id="cb9-34">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"-"</span>)</span>
<span id="cb9-35">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">identical</span>(received_date,<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">character</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>))) {</span>
<span id="cb9-36">      received_date<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Not available"</span></span>
<span id="cb9-37">      } <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> {</span>
<span id="cb9-38">        received_date<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>received_date}</span>
<span id="cb9-39">  </span>
<span id="cb9-40">  accepted_date<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(accepted_nodeset<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_node</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"day"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>(),</span>
<span id="cb9-41">                     accepted_nodeset<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_node</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"month"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>(),</span>
<span id="cb9-42">                     accepted_nodeset<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_node</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"year"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_text2</span>(),</span>
<span id="cb9-43">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"-"</span>)</span>
<span id="cb9-44">  </span>
<span id="cb9-45">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">identical</span>(accepted_date,<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">character</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>))) {</span>
<span id="cb9-46">      accepted_date<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Not available"</span></span>
<span id="cb9-47">      } <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> {</span>
<span id="cb9-48">        accepted_date<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>accepted_date}</span>
<span id="cb9-49">  </span>
<span id="cb9-50">  </span>
<span id="cb9-51">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Let´s put all in a temporary data frame and append it to final_table!</span></span>
<span id="cb9-52">  </span>
<span id="cb9-53">  temp_df<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(i,journal_name,collection,received_date,accepted_date)</span>
<span id="cb9-54">  </span>
<span id="cb9-55">  final_table<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bind_rows</span>(final_table,temp_df)</span>
<span id="cb9-56">  count<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>count<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb9-57">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(count)</span>
<span id="cb9-58">  </span>
<span id="cb9-59">}  </span></code></pre></div>
</div>
<p>This is the basic loop to text-mine PLOS corpus. The more <code>final_table</code> grows in size, the slower it will perform. This can be solved by wrapping the loop into another loop to save <code>final_table</code> into a .csv file every 10,000 articles, clear <code>final_table</code> and continue the loop for another 10,000 articles.</p>
</section>
<section id="extra" class="level3">
<h3 class="anchored" data-anchor-id="extra">Extra</h3>
<p>Maybe you are not interested in exploring the whole corpus and just want to work in a sample. To take a sample of 10,000 random articles you can just run the following code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">sample_articles<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sample</span>(list_of_articles,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10000</span>)</span></code></pre></div>
</div>
<p>Remember to replace <code>list_of_articles</code> with <code>sample_articles</code> at the start of the loop!</p>
<p>Similarly, you might want to focus in a particular PLOS journal. We can use the code journal to filter out all the unwanted journals since this code is available in the file name. If for example, we want to target PLOS Biology articles, the code “pbio” will select only this journal:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">PLOS_Biology_articles<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>list_of_articles[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">grep</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pbio"</span>,list_of_articles)]</span></code></pre></div>
</div>
</section>
<section id="references" class="level3">
<h3 class="anchored" data-anchor-id="references">References:</h3>
<p>Hanson, M. A., Gómez Barreiro, P., Crosetto, P., &amp; Brockington, D. (2023). <em>arXiv</em>. The Strain on Scientific Publishing. <a href="https://arxiv.org/abs/2309.15884" class="uri">https://arxiv.org/abs/2309.15884</a></p>
<p>Wickham H (2022). rvest: Easily Harvest (Scrape) Web Pages. R package version 1.0.3. <a href="https://CRAN.R-project.org/package=rvest" class="uri">https://CRAN.R-project.org/package=rvest</a></p>
<p>Wickham H, et al.&nbsp;(2019) “Welcome to the tidyverse.” <em>Journal of Open Source Software</em>, 4 (43), 1686. doi: <a href="https://doi.org/10.21105/joss.01686" class="uri">https://doi.org/10.21105/joss.01686</a></p>
<p>Last update: 18 Nov 2023</p>


</section>

 ]]></description>
  <category>PLOS</category>
  <category>R</category>
  <category>Text-mining</category>
  <category>The Strain on Scientific Publishing</category>
  <guid>https://pgomba.github.io/pgb_website/posts/08_10_23/index.html</guid>
  <pubDate>Sat, 07 Oct 2023 23:00:00 GMT</pubDate>
  <media:content url="https://pgomba.github.io/pgb_website/posts/08_10_23/thumbn.jpg" medium="image" type="image/jpeg"/>
</item>
</channel>
</rss>
